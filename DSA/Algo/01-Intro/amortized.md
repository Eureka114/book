# 摊还分析

摊还分析（Amortized Analysis）是一种确定数据结构操作成本的高级策略，它可以找出在一系列操作中，平均每个操作的时间复杂度。摊还分析并不关注每个操作的实际成本，而是关注操作序列的平均成本。参见[数据结构时间复杂度的摊还分析（均摊法）之一：基础](https://zhuanlan.zhihu.com/p/87355970)

摊还分析有三种常见的方法：

1. **聚集分析（Aggregate Analysis）**：这种方法将一系列操作的总成本分摊到每个操作上。例如，如果我们有一个可以在O(1)时间内完成插入的数据结构，但是每10次插入需要花费O(n)的时间来重新整理，那么聚集分析会将这个O(n)的成本分摊到这10次插入上，得出平均每次插入的成本是O(1)。

2. **记账法（Accounting Method）**：这种方法通过给便宜的操作“存款”，然后在昂贵的操作时“取款”来进行分析。便宜的操作存款的额度会超过它们的实际成本，这个额外的成本就是为了在后面昂贵的操作时使用。

3. **势能法（Potential Method）**：这种方法将数据结构看作是一个物理系统，定义一个“势能”函数来度量系统的“能量”。便宜的操作会增加系统的势能，昂贵的操作会消耗势能。通过势能的变化，我们可以计算出操作的摊还成本。

例如，动态数组（Vector）等可以使用聚合分析；二叉堆的插入操作和栈的入栈、出栈和遍历出栈可以使用记账法；斐波那契堆删除的最小元素操作可以使用势能法。
